%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% StuPro B, "Programmierumgebung Offener Antrieb" (POA)
%% Anforderungen
%% $Id: anforderungen.tex,v 1.1 2003/05/31 16:16:29 garbeam Exp $
%% Achtung: Diese Datei wird ins Angebot inkludiert!
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% Anforderungen
\section{Anforderungen}
Dieses Dokument beschreibt die Anforderungen des Kunden an das
Studienprojekt B, ''Programmierumgebung Offener Antrieb'' (POA).

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% GUI
\subsection{GUI}

Die Oberfläche von POA untergliedert sich in folgende Teilbereiche:
\begin{itemize}
\item Grafisches Hauptfenster das alle Module des CPLD abbildet
\item Modulbibliothek
\item Funktionsblockkonfigurationsdialog 
\item externer Editor
\item Optimierungsdialog
\item externes Compilierterminal
\item CPLD-Download Dialog
\item Konfigurationsdialog
\end{itemize}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% Hauptfenster
\subsubsection{Hauptfenster}
Im Hauptfenster werden die Funktionsblöcke (CPU, Cores, E/A-Blöcke) sowie
Signalleitungen in einem rasterisiertem Layout dargestellt und mit Maus- und
Tastatureingaben bearbeitet.\par
Desweiteren werden Funktionsblöcke aus der Modulbibliothek via Drag\&Drop in
das Hauptfenster gezogen oder entfernt. Die Verknüpfung zwischen den
Funktionsblöcken geschieht durch ziehen von Signalleitungen (Linien) mit der
Maus.\newline
Durch Doppelklick auf einen Funktionsblock öffnet sich der
Funktionsblockkonfigurationsdialog.\newline
Im Menü des Hauptfensters wird ein konfiguriertes Layout gespeichert oder
geöffnet. Alle Dialoge sind über die Toolbar und Menüleiste aufrufbar. 

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% Modulbibliothek
\subsubsection{Modulbibliothek}
Befindet sich angedockt am Rand des Hauptfensters und stellt eine Liste aller
in der Bibliothek enthaltenen CPU- und Coreblöcke dar. Die Darstellung der
CPUs und Cores in dieser Liste (Baumdiagramm CPU/Cores?) ist noch ungeklärt.
Die CPU- und Coreblöcke können via Drag\&Drop ins Hauptfenster gezogen werden.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% Funktionsblockkonfigurationsdialog
\subsubsection{Funktionsblockkonfigurationsdialog}
Folgende Funktionsblockparameter können in diesem Dialog konfiguriert werden:
\begin{itemize}
\item Anzahl der Signal-Ein/Ausgänge (Bezeichner?) 
\item Verknüpfungen an E/As?
\item Zeitoffset einstellen
\item Taktrate einstellen
\item externen Editor aufrufen
\end{itemize}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% Externer Editor
\subsubsection{Externer Editor}
Bietet Editierung des zum CPU-Block gehörenden Sourcecodes an. Durch
Einbindung einer Template-Sourcecode Datei wird bei erstmaliger Editierung
ein vorgenerierter Rahmencode erzeugt und im Editor dargestellt.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% Optimierungsdialog
\subsubsection{Optimierungsdialog}
Dieser Dialog bietet die Ausführung der folgenden Schritte an:
\begin{itemize}
\item Plausibilitätsprüfung der Signalverknüpfungen
\item Signallaufzeitbestimmung
\item Laufzeitoptimierung
\end{itemize}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% externen Compilierterminal
\subsubsection{externes Compilierterminal}
Der Compiliervorgang der CPLD-Konfiguration wird in einem externen Terminal
aus einer Menüfunktion heraus gestartet.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% CPLD-Download Dialog
\subsubsection{CPLD-Download Dialog}
Bietet Auswahl downloadbarer (vorkompilierter) Funktionsblöcke an und startet
den Downloadvorgang in externem Terminal.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% Konfigurationsdialog
\subsubsection{Konfigurationsdialog}
Der Konfigurationsdialog bietet die Konfiguration von POA an, u.a. Einstellung
des externen Editors, des Compilers, des externes Terminals, des C-Sourcecode-
Templates und des CPLD-Downloads.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% Interfaces
\subsection{Interfaces}

POA unterstützt folgende Interfaces:
\begin{itemize}
\item externer Editor
\item Signallaufzeitbestimmung
\item Compiler
\item CPLD-Download Tool
\end{itemize}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% externer Editor
\subsubsection{externer Editor}
Schnittstelle zum Betriebssystem über temporäre Sourcedatei.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% Signallaufzeitbestimmung
\subsubsection{Signallaufzeitbestimmung}
Schnittstelle zum Betriebssystem über spezielles Programm und evtl.
temporäre Resultatdatei (noch ungeklärt).

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% Compiler
\subsubsection{Compiler}
Schnittstelle zum Betriebssystem über Compilerprogramm (gcc?).

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% CPLD-Download
\subsubsection{CPLD-Download}
Schnittstelle zum Betriebssystem über spezielles Downloadprogramm für
serielle Schnitstelle (näheres noch ungeklärt).

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% Algorithmen
\subsection{Algorithmen}

POA enthält folgende erwähnenswerte zu entwickelnde/einzubindende Algorithmen:
\begin{itemize}
\item Laufzeitoptimierungsalgorithmus (Scheduling)
\item Darstellungsalgorithmus des CPLD-Layouts
\item Speichern und Öffnen von konfigurierten CPLD-Layouts und Sourcen via XML
\end{itemize}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% Formate
\subsection{Formate}

POA nutzt folgende Formate:

\begin{itemize}
\item spezielles XML Format zum Speichern und Öffnen von CPLD-Layouts
\item C-Sourcecode Dateien der CPU-Blöcke in geeigneter Verzeichnisstruktur
\item Ergebnisse der Signallaufzeitbestimmung in externer Datei?
      (noch ungeklärt)
\item Object-Code (ELF?) für compilierte CPU-Blöcke
\item spezielles Headerformat für CPLD-Download (noch ungeklärt)
\item Output des Compilers (stdout)
\item Output des CPLD-Downloads (stdout)
\end{itemize}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% XML
\subsubsection{XML}
Ein spezielles XML Format wird zum Speichern und Öffnen von
CPLD-Layout-Konfigurationen verwendet.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% Sourcecode der CPU-Blöcke
\subsubsection{Sourcecode der CPU-Blöcke}
Es wird ein vorkonfigurierbares C-Template als Vorlage für
Rahmencodeerzeugung der CPU-Blöcke verwendet. Der Sourcecode von CPU-Blöcken
wird in einer geeigneten Verzeichnisstruktur abgelegt.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% Background
\subsection{Background}

Es werden viele Neuentwicklungen im Bereich der Werkzeugmaschinen
gemacht. Viele dieser Entwicklungen beinhalten neue Kinematiken, wie
z. B. die Parallelkinematiken, und Sensoren, wie z. B. den Ferraris 
Relativbeschleunigungssensor.\par
Dadurch entstehen neue Anforderungen an die
Antriebsregelung. Zust\"atzliche Sensor-Signale m\"ussen in den
Reglerstrukturen ber\"ucksichtigt werden - oder sogar v\"ollig neue
Reglerstrukturen werden ben\"otigt.\par
Die momentan auf dem Markt erh\"altlichen Reglersysteme erlauben meist
weder die Ber\"ucksichtigung neuartiger Sensoren nooch bieten sie die
M\"oglichkeit, eigene anwenderspezifische Reglerstrukturen zu 
implementieren.\par
Daher wirde am ISW eine Plattform f\"ur die Antrebsregelung
entwickelt, auf der es dem Anwender in jeder Hinsicht offen steht,
eigene Funktionalit\"aten zu inegrieren. Diese Plattform wird hier
kurz ``Offener Antrieb'' bezeichnet. Die hardwaretechnische
Realisierung erfolgt in Form einer PC-Einsteckplatine.\par
Zentrales Elemnet des Offenen Antriebs ist der Altera
``APEX''Baustein. Es handelt sich dabei um einen CPLD der sich frei
programmieren l\"asst. Der Anwender hat die M\"oglichkeit, die
Funktion des Bausteins seinen Bd\"urfnissen anzupassen.\par
Um die Offenheit f\"ur jeden Anwender nutzbar zu machen, wird f\"ur
den CPLD eine Architektur festgelegt, die es erm\"oglicht, einzelne
Funktionalit\"aten in Form von Modulen zu implementieren. Diese Modlue
k\"onnen aus festprogrammierten Schaltungen (Cores) und
freiprogrammierbaren CPUs bestehen. Jedes Modul kann auf die Signale
aller anderen Module zugreifen und stellt seine eigenen Ausgangsignale
allen andernen Modulen zur Verf\"ugung.\par
Ziel dieses Projekts ist es, eine Programmierumgebung f\"ur das
Netzwerk von CPUs und Cores zu schaffen, in dem ein bereits auf dme
CPLD vorhandenes Netzwerk konfiguriert werden kann. Es soll in der
grafischen Oberfl\"ache erkennbar sein, welche Ein- und Ausg\"ange die
einzelnen CPUs und Cores haben. Des Weiteren sollen den CPUs C-Sourcen
zugeordnet werden und diese f\"ur die CPU kompiliert und auf das
offene Antriebsboard heruntergeladen werden k\"onnen.
 
